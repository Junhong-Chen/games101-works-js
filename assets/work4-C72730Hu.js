import"./modulepreload-polyfill-B5Qt9EMX.js";import{G as P}from"./lil-gui.esm-DNkUmkFf.js";const l=document.querySelector("#canvas-el"),d=parseInt(l.getAttribute("width")),g=parseInt(l.getAttribute("height")),s=[],v=new P,f={controlPointsCount:4,naiveBezier:!0};let c;v.add(f,"controlPointsCount",3,10,1).onFinishChange(function(){x(),c&&cv.imshow(l,c)});v.add(f,"naiveBezier");cv.onRuntimeInitialized=function(){c=new cv.Mat(g,d,cv.CV_8UC3),cv.imshow(l,c)};l.addEventListener("mousedown",function(n){const e=l.getBoundingClientRect(),i=n.clientX-e.left,o=n.clientY-e.top;console.log(`Left button of the mouse is clicked - position (${i}, ${o})`),s.length>=f.controlPointsCount&&x(),s.push(new cv.Point(i,o)),s.length===f.controlPointsCount&&(f.naiveBezier&&s.length===4&&C(s,c),B(s,c));for(const r of s)cv.circle(c,r,3,new cv.Scalar(255,255,255,255),3);c&&cv.imshow(l,c)},!1);function z(n){return Math.exp(-n*n/2)}function x(){s.length=0,c.setTo(new cv.Scalar(0,0,0,0))}function C(n,e){const[i,o,r,a]=n;for(let t=0;t<=1;t+=.001){let h=Math.pow(1-t,3)*i.x+3*t*Math.pow(1-t,2)*o.x+3*Math.pow(t,2)*(1-t)*r.x+Math.pow(t,3)*a.x,u=Math.pow(1-t,3)*i.y+3*t*Math.pow(1-t,2)*o.y+3*Math.pow(t,2)*(1-t)*r.y+Math.pow(t,3)*a.y;e.ucharPtr(Math.round(u),Math.round(h))[0]=255}}function M(n,e){if(n.length===1)return n[0];const i=[];for(let o=0;o<n.length-1;o++){const r=n[o],a=n[o+1],t=r.x*(1-e)+a.x*e,h=r.y*(1-e)+a.y*e;i.push(new cv.Point(t,h))}return M(i,e)}function B(n,e){for(let i=0;i<=1;i+=.001){const o=M(n,i),r=Math.round(o.x),a=Math.round(o.y);for(let t=0;t<=1;t++)for(let h=0;h<=1;h++){const u=r+h,p=a+t,y=Math.sqrt(Math.pow(o.x-u,2)+Math.pow(o.y-p,2)),m=z(y);if(u>=0&&u<=d&&p>=0&&p<=g){const w=e.ucharPtr(p,u);w[1]=Math.max(w[1],m*255)}}}}
